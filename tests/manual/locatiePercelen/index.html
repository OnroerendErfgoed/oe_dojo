<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Test LocatiePercelen</title>
  <link rel="stylesheet" href="../../../resources/css/localTest.css" />

  <!--Wordt nu via AMD geladen: -->
  <!--script src="../../../proj4/dist/proj4.js"></script-->
</head>

<body class="nihilo">
<div class="row">
  <div class="large-8 columns">
    <div id="widgetNode"></div>
  </div>
</div>

<!-- load Dojo -->
<script type="text/javascript" src="./locatieConfig.js">

</script>
<script type="text/javascript" src="../../../dojo/dojo.js"></script>
<script src="https://use.fontawesome.com/db4e5d4de9.js"></script>

<script>
  require([
    'oe_dojo/services/LocatieService',
    'oe_dojo/LocatiePercelen',
    'oe_dojo/HandlerUtils',
    'dojo/domReady!'
  ], function (LocatieService, LocatiePercelen) {

    var testzone = {"type":"MultiPolygon","coordinates":[[[[156150.90194227203,209986.07671206398],[156136.90194227203,209975.32671206398],[156169.90194227203,209967.57671206398],[156150.90194227203,209986.07671206398]]]],"crs":{"type":"name","properties":{"name":"urn:ogc:def:crs:EPSG::31370"}}};

    var locatieService = new LocatieService({
      agivGRBUrl: 'https://dev-geo.onroerenderfgoed.be/ogcproxy?url=https://geo.agiv.be/ogc/wfs/grb',
      crabUrl: 'https://dev-geo.onroerenderfgoed.be/',
      appUrl: 'http://localhost:6543/'
    });

    var locatie = {
      contour: testzone
    };

    locatieService.getAfdelingenStore().then(function(afdelingen) {
      var locatiePercelen = new LocatiePercelen({
        locatieService: locatieService,
        afdelingenStore: afdelingen,
        showOppervlakte: false
      }, 'widgetNode');

      locatiePercelen.startup();
      locatiePercelen.updateZone(locatie.contour);

      locatiePercelen.updateZoneOppervlakte(500);
    });
  });

</script>

</body>
</html>